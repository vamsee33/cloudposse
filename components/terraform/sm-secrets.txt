
### 📘 Overview

AWS Secrets Manager (SM) is used to store sensitive values like credentials and API keys securely.

---

### ⚙️ Creating SM Secrets using Atmos

* The Terraform component for secrets is located at:
  `components/terraform/secrets-manager/driveclient`

* To reference this in a stack, update your stack YAML like this:

```yaml
import:
  - orgs/dwt/dev/data/_defaults
  - mixins/region/us-east-1

components:
  terraform:
    secrets-manager/driveclient:
      metadata:
        component: secrets-manager
      vars:
        secret_names:
          - driveclient/app/auth-secrets
          - driveclient/app/database-secrets
```

> ⚠️ **Note:** This only creates the secret reference in AWS.
> You must manually create or update the secret **values** in the AWS console or via CLI.

---

### 📥 Accessing Secrets in EC2 (AWS CLI)

Use the following command inside your EC2 instance to fetch the secret value:

```bash
aws secretsmanager get-secret-value \
  --secret-id driveclient/app/auth-secrets \
  --query SecretString \
  --output text
```

To fetch a specific field from a JSON-formatted secret:

```bash
aws secretsmanager get-secret-value \
  --secret-id driveclient/app/auth-secrets \
  --query 'SecretString' \
  --output text | jq -r '.your_field_name'
```

